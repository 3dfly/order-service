# Generic FDM Printer Configuration - TPU Material
# Generated for PrusaSlicer CLI

# printer settings
printer_settings_id = generic_fdm_tpu
printer_model = Generic FDM Printer
printer_variant = 0.4
printer_vendor = Generic

# printer physical specs
bed_shape = 0x0,220x0,220x220,0x220
max_print_height = 250
printer_technology = FFF

# extruder settings
nozzle_diameter = 0.4
filament_diameter = 1.75
filament_density = 1.2
extrusion_multiplier = 1.0

# temperature settings (TPU)
bed_temperature = 50
first_layer_bed_temperature = 55
temperature = 220
first_layer_temperature = 225

# print speeds (mm/s) - Updated to match Bambu Studio speeds
perimeter_speed = 150
external_perimeter_speed = 60
infill_speed = 200
solid_infill_speed = 25
top_solid_infill_speed = 20
support_material_speed = 25
support_material_interface_speed = 25
bridge_speed = 15
gap_fill_speed = 20
travel_speed = 120
first_layer_speed = 50

# layer settings
first_layer_height = 0.2

# infill settings
fill_pattern = grid
solid_infill_every_layers = 0

# perimeters/shells
top_solid_layers = 5
bottom_solid_layers = 3

# support settings (TPU doesn't like supports)
support_material_fill_density = 15%
support_material_auto = 0
support_material_threshold = 60
support_material_pattern = rectilinear
support_material_spacing = 2.5
support_material_angle = 0
support_material_interface_layers = 2

# retraction settings (minimal for TPU)
retract_length = 0.5
retract_speed = 25
retract_restart_extra = 0
retract_before_travel = 1.0
retract_layer_change = 0
wipe = 0

# cooling (TPU needs minimal cooling)
fan_always_on = 0
min_fan_speed = 0
max_fan_speed = 30
bridge_fan_speed = 50
disable_fan_first_layers = 3

# advanced - Increased for better performance while safe for TPU
default_acceleration = 2000
perimeter_acceleration = 1500
external_perimeter_acceleration = 1500
first_layer_acceleration = 1000
infill_acceleration = 3000
solid_infill_acceleration = 2000
top_solid_infill_acceleration = 1500
travel_acceleration = 3000

# Machine limits (MK4S-like capabilities with input shaping)
machine_max_feedrate_x = 500,200
machine_max_feedrate_y = 500,200
machine_max_feedrate_z = 12,12
machine_max_feedrate_e = 120,120
machine_max_acceleration_x = 10000,2000
machine_max_acceleration_y = 10000,2000
machine_max_acceleration_z = 500,200
machine_max_acceleration_e = 10000,5000
machine_max_acceleration_extruding = 20000,1250
machine_max_acceleration_retracting = 1500,1250
machine_max_acceleration_travel = 10000,1250
machine_max_jerk_x = 8,8
machine_max_jerk_y = 8,8
machine_max_jerk_z = 0.4,0.4
machine_max_jerk_e = 4.5,4.5
max_print_speed = 700

# output
output_filename_format = [input_filename_base].gcode
gcode_flavor = marlin
gcode_comments = 1

# start g-code
start_gcode = G28 ; home all axes\nG1 Z5 F5000 ; lift nozzle\nM109 S[first_layer_temperature] ; set & wait for hotend temp\nM190 S[first_layer_bed_temperature] ; set & wait for bed temp

# end g-code
end_gcode = M104 S0 ; turn off temperature\nM140 S0 ; turn off heatbed\nM107 ; turn off fan\nG1 X0 Y220 ; move to front\nM84 ; disable motors

# other
complete_objects = 0
extruder_clearance_height = 20
extruder_clearance_radius = 20
